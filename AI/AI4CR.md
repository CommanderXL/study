
对于 AI4CR 的一些思考：

工程 + AI 结合：

明确哪些能做，哪些不能做？

AI 优势：

* 强大的规则引擎（静态分析）；

| 类别      | 典型问题                                         | 检出示例                             |
| ------- | -------------------------------------------- | -------------------------------- |
| 语法 / 类型 | TS 编译失败、隐式 any、空值调用                          | `const x: string = null;`        |
| Lint 规则 | 未使用变量、== 与 ===、array-index key               | `eslint(no-unused-vars)`         |
| 安全      | dangerouslySetInnerHTML 无 sanitize、eval 用户输入 | `react/no-danger-with-children`  |
| 死代码     | import 了却没用、函数从未被调用                          | `import {a} from 'x'` 但 a 出现 0 次 |
| 循环依赖    | A → B → A                                    | `madge --circular` 输出循环依赖的结果       |

实际这些工作通过一些工程化的手段同样能发现；


* 概率模型：大量的代码训练数据，出现次数最多的写法当作“通用模式”或者是“通用的业务逻辑”来作为先验数据集；

| 特征组合                   | 先验频率 | 我的默认动作        |
| ---------------------- | ---- | ------------- |
| 金额字段 `/ 100`           | 92%  | ✅ 符合大部分代码的编写        |
| 金额字段 `/ 99`            | 3%   | 🟡“魔法数字 99？”  |
| 路由跳转前 `if (!user)` 先行判断是否登录过 | 88%  | ✅ 符合大部分代码的编写        |
| 路由跳转前无任何登录判断           | 12%  | 🟡“请确认是否允许游客” |

这些百分比数据是模型当中预训练出来的。


AI 局限：

* 不会实际执行代码，而是通过一些静态分析+模式匹配，那么对于依赖真实的代码运行的场景来说有局限：
  * 环境判断，兼容性问题；
  * 样式问题；
  * 条件分支、eventBus、provide/inject 等运行时代码；
* 业务规则；
  * 在没有足够的业务场景输入的情况下，主要依赖训练数据的当中的通用规则来进行代码打标；
  * AI 知道这段代码的执行逻辑是什么，但是并不知道这个逻辑是否实际的业务需求（前后端数据协议，上下游数据通信等）；

对于 AI 局限，有哪些辅助手段能提升大模型 CR 的准确度呢？

* 代码 commit，描述业务场景；
* 预处理一些代码内容，生成结构化的数据；
* 前后端接口类型定义，确保数据单一源；
* ...


实际的业务场景 case：